import{d as K,s as w,O as M,q as G,I as H,a0 as J,a1 as X,a2 as Y,r as h,o as s,f as b,b as p,w as d,e as L,E as N,h as a,F as S,g as j,R as Q,c as C,K as O,a3 as R,i as E,a4 as Z,a5 as ee,z as $,a6 as ae,a7 as te,a8 as ne,t as le,Q as oe,a9 as q}from"./index.4e690031.js";import{_ as W}from"./plugin-vueexport-helper.2444895f.js";const re={key:0,class:"card searchForm-wrap"},se={class:"search-btn-box"},ce=K({__name:"SearchForm",props:{search:{type:Array,default:()=>[]}},emits:["search"],setup(_,{expose:D,emit:P}){var c;const u=_,m=w(!1),l=w(0),i=M({}),o=w();for(const e of u.search)i[e.prop]=(c=e.defaultValue)!=null?c:"";const F=e=>{var n,y,v,k;return{label:(y=(n=e.defaultName)==null?void 0:n.label)!=null?y:"label",value:(k=(v=e.defaultName)==null?void 0:v.value)!=null?k:"value"}},g=e=>{var n;return(n=e.placeholder)!=null?n:e.type==="el-input"?"\u8BF7\u8F93\u5165":"\u8BF7\u9009\u62E9"},V=G(()=>({display:"grid",gap:"15px",gridTemplateColumns:`repeat(${l.value}, minmax(0, 1fr))`})),f=()=>{const e=window.innerWidth;switch(!!e){case e<768:l.value=1;break;case(e>=768&&e<992):l.value=2;break;case(e>=992&&e<1200):l.value=3;break;case(e>=1200&&e<1920):l.value=4;break;case e>=1920:l.value=4;break}};H(()=>{f(),window.addEventListener("resize",f)}),J(()=>{f(),window.addEventListener("resize",f)}),X(()=>{window.removeEventListener("resize",f)}),Y(()=>{window.removeEventListener("resize",f)});const B=()=>{P("search")},T=()=>{o.value.resetFields()};return D({form:i}),(e,n)=>{const y=h("el-form-item"),v=h("el-button"),k=h("el-form");return _.search.length?(s(),b("div",re,[p(k,{ref_key:"searchFormRef",ref:o,class:"form-inline",model:a(i)},{default:d(()=>[L("div",{class:"grid-wrap",style:N(a(V))},[(s(!0),b(S,null,j(_.search,(t,x)=>Q((s(),b("div",{key:x,style:N(a(l)===1?"grid-column:span 1":`grid-column:span ${t.span||1}`)},[p(y,{label:t.label,prop:t.prop},{default:d(()=>{var z;return[(s(),C(O(t.type),R({modelValue:a(i)[t.prop],"onUpdate:modelValue":r=>a(i)[t.prop]=r},t.config,{style:{width:"100%"},clearable:(z=t.clearable)!=null?z:!1,placeholder:g(t),options:["el-select-v2","el-cascader"].includes(t.type)?t.options:[],"range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"}),{default:d(()=>[t.type==="el-select"?(s(!0),b(S,{key:0},j(t.options,r=>(s(),C(O("el-option"),{key:r[F(t).value],label:r[F(t).label],value:r[F(t).value]},null,8,["label","value"]))),128)):E("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue","clearable","placeholder","options"]))]}),_:2},1032,["label","prop"])],4)),[[Z,x<(a(l)>1?a(l)-1:a(l))||a(m)]])),128)),L("div",{style:N(`grid-column:${a(l)}`)},[L("div",se,[p(v,{onClick:B,type:"primary",icon:a(ee)},{default:d(()=>[$("\u641C\u7D22")]),_:1},8,["icon"]),p(v,{onClick:T,icon:a(ae)},{default:d(()=>[$("\u91CD\u7F6E")]),_:1},8,["icon"]),p(v,{class:"expand",type:"primary",link:"",onClick:n[0]||(n[0]=t=>m.value=!a(m)),icon:a(m)?a(te):a(ne)},{default:d(()=>[$(le(a(m)?"\u6536\u8D77":"\u5C55\u5F00"),1)]),_:1},8,["icon"])])],4)],4)]),_:1},8,["model"])])):E("",!0)}}});const ue=W(ce,[["__scopeId","data-v-004143f7"]]),de={class:"card table",shadow:"never"},ie=K({__name:"index",props:{search:{type:Array,default:()=>[]},column:{type:Object,default:()=>[]},api:{type:Function,required:!0},callback:{type:Function,default:null},params:{type:Object,default:()=>({})},isPageable:{type:Boolean,default:!0},config:{type:Object,default:()=>({})}},emits:["handleList"],setup(_,{expose:D,emit:P}){const u=_,m=w(),l=w([]),i=w(!1),o=M({current:1,limit:10,total:0}),F=()=>({border:!0,...u.config}),g=async()=>{try{i.value=!0;const c=u.isPageable?{current:o.current,limit:o.limit}:{},e={...u.params,...m.value.form,...c};let{data:n}=await u.api(e);u.callback&&(n=u.callback(n)),l.value=u.isPageable?n.data:n,u.isPageable&&(o.total=n.total),P("handleList",l.value,n)}finally{i.value=!1}},V=()=>{g()},f=c=>{o.current=1,o.limit=c,g()},B=c=>{o.current=c,g()};return D({getList:g,resetTable:()=>{o.current=1,g()}}),(c,e)=>{const n=ue,y=h("el-form-item"),v=h("el-form"),k=h("el-table-column"),t=h("el-table"),x=h("el-pagination"),z=oe("loading");return s(),b(S,null,[p(n,{ref_key:"form",ref:m,search:_.search,onSearch:V},null,8,["search"]),Q((s(),b("div",de,[p(v,{inline:""},{default:d(()=>[p(y,null,{default:d(()=>[q(c.$slots,"header",{},void 0,!0)]),_:3})]),_:3}),p(t,R({data:a(l)},F()),{default:d(()=>[(s(!0),b(S,null,j(_.column,r=>{var A;return s(),C(k,R(r,{align:(A=r.align)!=null?A:"center"}),{default:d(({row:I,$index:U})=>[r.render?(s(),C(O(r.render),{key:0,row:I,index:U},null,8,["row","index"])):r.slot?q(c.$slots,r.slot,{key:1,row:I,index:U},void 0,!0):E("",!0)]),_:2},1040,["align"])}),256))]),_:3},16,["data"]),_.isPageable?(s(),C(x,{key:0,background:"",layout:"->,total, sizes, prev, pager, next, jumper","current-page":a(o).current,"page-size":a(o).limit,total:a(o).total,"page-sizes":[10,25,50,100],onSizeChange:f,onCurrentChange:B},null,8,["current-page","page-size","total"])):E("",!0)])),[[z,a(i)]])],64)}}});const me=W(ie,[["__scopeId","data-v-a2cbd5c9"]]);export{me as _};
