var Y=Object.defineProperty;var K=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var M=(l,c,t)=>c in l?Y(l,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[c]=t,z=(l,c)=>{for(var t in c||(c={}))Z.call(c,t)&&M(l,t,c[t]);if(K)for(var t of K(c))ee.call(c,t)&&M(l,t,c[t]);return l};var Q=(l,c,t)=>new Promise((d,_)=>{var o=u=>{try{r(t.next(u))}catch(f){_(f)}},m=u=>{try{r(t.throw(u))}catch(f){_(f)}},r=u=>u.done?d(u.value):Promise.resolve(u.value).then(o,m);r((t=t.apply(l,c)).next())});import{d as G,s as x,O as H,q as ae,I as te,a0 as ne,a1 as le,a2 as oe,r as k,o as p,f as w,b as g,w as h,e as N,E as $,h as a,F as P,g as O,R as J,c as S,K as R,a3 as T,i as V,a4 as re,a5 as se,z as j,a6 as ce,a7 as ue,a8 as de,t as ie,Q as pe,a9 as W}from"./index.664a9d74.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";const _e={key:0,class:"card searchForm-wrap"},me={class:"search-btn-box"},fe=G({__name:"SearchForm",props:{search:{type:Array,default:()=>[]}},emits:["search"],setup(l,{expose:c,emit:t}){var v;const d=l,_=x(!1),o=x(0),m=H({}),r=x();for(const e of d.search)m[e.prop]=(v=e.defaultValue)!=null?v:"";const u=e=>{var s,F,y,C;return{label:(F=(s=e.defaultName)==null?void 0:s.label)!=null?F:"label",value:(C=(y=e.defaultName)==null?void 0:y.value)!=null?C:"value"}},f=e=>{var s;return(s=e.placeholder)!=null?s:e.type==="el-input"?"\u8BF7\u8F93\u5165":"\u8BF7\u9009\u62E9"},B=ae(()=>({display:"grid",gap:"15px",gridTemplateColumns:`repeat(${o.value}, minmax(0, 1fr))`})),b=()=>{const e=window.innerWidth;switch(!!e){case e<768:o.value=1;break;case(e>=768&&e<992):o.value=2;break;case(e>=992&&e<1200):o.value=3;break;case(e>=1200&&e<1920):o.value=4;break;case e>=1920:o.value=4;break}};te(()=>{b(),window.addEventListener("resize",b)}),ne(()=>{b(),window.addEventListener("resize",b)}),le(()=>{window.removeEventListener("resize",b)}),oe(()=>{window.removeEventListener("resize",b)});const L=()=>{t("search")},A=()=>{r.value.resetFields()};return c({form:m}),(e,s)=>{const F=k("el-form-item"),y=k("el-button"),C=k("el-form");return l.search.length?(p(),w("div",_e,[g(C,{ref_key:"searchFormRef",ref:r,class:"form-inline",model:a(m)},{default:h(()=>[N("div",{class:"grid-wrap",style:$(a(B))},[(p(!0),w(P,null,O(l.search,(n,E)=>J((p(),w("div",{key:E,style:$(a(o)===1?"grid-column:span 1":`grid-column:span ${n.span||1}`)},[g(F,{label:n.label,prop:n.prop},{default:h(()=>{var D;return[(p(),S(R(n.type),T({modelValue:a(m)[n.prop],"onUpdate:modelValue":i=>a(m)[n.prop]=i},n.config,{style:{width:"100%"},clearable:(D=n.clearable)!=null?D:!1,placeholder:f(n),options:["el-select-v2","el-cascader"].includes(n.type)?n.options:[],"range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"}),{default:h(()=>[n.type==="el-select"?(p(!0),w(P,{key:0},O(n.options,i=>(p(),S(R("el-option"),{key:i[u(n).value],label:i[u(n).label],value:i[u(n).value]},null,8,["label","value"]))),128)):V("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue","clearable","placeholder","options"]))]}),_:2},1032,["label","prop"])],4)),[[re,E<(a(o)>1?a(o)-1:a(o))||a(_)]])),128)),N("div",{style:$(`grid-column:${a(o)}`)},[N("div",me,[g(y,{onClick:L,type:"primary",icon:a(se)},{default:h(()=>[j("\u641C\u7D22")]),_:1},8,["icon"]),g(y,{onClick:A,icon:a(ce)},{default:h(()=>[j("\u91CD\u7F6E")]),_:1},8,["icon"]),g(y,{class:"expand",type:"primary",link:"",onClick:s[0]||(s[0]=n=>_.value=!a(_)),icon:a(_)?a(ue):a(de)},{default:h(()=>[j(ie(a(_)?"\u6536\u8D77":"\u5C55\u5F00"),1)]),_:1},8,["icon"])])],4)],4)]),_:1},8,["model"])])):V("",!0)}}});const ve=X(fe,[["__scopeId","data-v-004143f7"]]),he={class:"card table",shadow:"never"},ge=G({__name:"index",props:{search:{type:Array,default:()=>[]},column:{type:Object,default:()=>[]},api:{type:Function,required:!0},callback:{type:Function,default:null},params:{type:Object,default:()=>({})},isPageable:{type:Boolean,default:!0},config:{type:Object,default:()=>({})}},emits:["handleList"],setup(l,{expose:c,emit:t}){const d=l,_=x(),o=x([]),m=x(!1),r=H({current:1,limit:10,total:0}),u=()=>z({border:!0},d.config),f=()=>Q(this,null,function*(){try{m.value=!0;const v=d.isPageable?{current:r.current,limit:r.limit}:{},e=z(z(z({},d.params),_.value.form),v);let{data:s}=yield d.api(e);d.callback&&(s=d.callback(s)),o.value=d.isPageable?s.data:s,d.isPageable&&(r.total=s.total),t("handleList",o.value,s)}finally{m.value=!1}}),B=()=>{f()},b=v=>{r.current=1,r.limit=v,f()},L=v=>{r.current=v,f()};return c({getList:f,resetTable:()=>{r.current=1,f()}}),(v,e)=>{const s=ve,F=k("el-form-item"),y=k("el-form"),C=k("el-table-column"),n=k("el-table"),E=k("el-pagination"),D=pe("loading");return p(),w(P,null,[g(s,{ref_key:"form",ref:_,search:l.search,onSearch:B},null,8,["search"]),J((p(),w("div",he,[g(y,{inline:""},{default:h(()=>[g(F,null,{default:h(()=>[W(v.$slots,"header",{},void 0,!0)]),_:3})]),_:3}),g(n,T({data:a(o)},u()),{default:h(()=>[(p(!0),w(P,null,O(l.column,i=>{var I;return p(),S(C,T(i,{align:(I=i.align)!=null?I:"center"}),{default:h(({row:U,$index:q})=>[i.render?(p(),S(R(i.render),{key:0,row:U,index:q},null,8,["row","index"])):i.slot?W(v.$slots,i.slot,{key:1,row:U,index:q},void 0,!0):V("",!0)]),_:2},1040,["align"])}),256))]),_:3},16,["data"]),l.isPageable?(p(),S(E,{key:0,background:"",layout:"->,total, sizes, prev, pager, next, jumper","current-page":a(r).current,"page-size":a(r).limit,total:a(r).total,"page-sizes":[10,25,50,100],onSizeChange:b,onCurrentChange:L},null,8,["current-page","page-size","total"])):V("",!0)])),[[D,a(m)]])],64)}}});const we=X(ge,[["__scopeId","data-v-a2cbd5c9"]]);export{we as _};
